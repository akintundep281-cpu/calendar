<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Peter Calendar</title>
  <style>
    /* ====== Root & Reset (mobile-first) ====== */
    :root{
      --bg:#071026; --panel:#0b1220; --muted:#9aa8bd; --accent1:#7c3aed; --accent2:#06b6d4; --accent3:#f97316;
      --radius:12px; --gap:12px; --touch:48px; --max-width:1100px;
      font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      color-scheme: dark;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background: radial-gradient(800px 400px at 10% 10%, rgba(124,58,237,0.08), transparent), radial-gradient(600px 300px at 90% 90%, rgba(6,182,212,0.04), transparent), var(--bg); color:#e6eef8; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;}
    a{color:inherit} button{font:inherit}
    
    /* ====== App container ====== */
    .wrap{max-width:var(--max-width);margin:18px auto;padding:14px;display:grid;grid-template-columns:1fr;gap:var(--gap)}
    .app{display:grid;grid-template-columns:1fr;gap:var(--gap);min-height:72vh;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);padding:14px;border-radius:16px;box-shadow:0 12px 40px rgba(2,6,23,0.6)}
    
    /* ====== Header (mobile) ====== */
    header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:8px}
    .brand{display:flex;align-items:center;gap:10px}
    .logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent1),var(--accent2));display:flex;align-items:center;justify-content:center;font-weight:700;color:white}
    .title{font-weight:700} .hamburger{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px;border-radius:10px;color:inherit;min-width:44px}
    
    /* ====== Layout: sidebar + main (desktop) ====== */
    .layout{display:grid;grid-template-columns:1fr;gap:var(--gap)}
    .sidebar{display:flex;flex-direction:column;gap:10px;padding:12px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent)}
    .nav{display:flex;gap:8px;flex-wrap:wrap} .nav button{background:transparent;border:0;padding:8px 10px;border-radius:10px;cursor:pointer;color:var(--muted)}
    .nav button.active{background:linear-gradient(90deg, rgba(124,58,237,0.12), rgba(6,182,212,0.06));color:#fff}
    .time-card{margin-top:auto;padding:10px;border-radius:10px;background:rgba(255,255,255,0.02);font-size:14px}
    .main{padding:12px;border-radius:12px;background:transparent;min-height:420px}
    
    /* ====== Pages ====== */
    .page{display:none;opacity:0;transform:translateY(6px);transition:all 260ms ease}
    .page.active{display:block;opacity:1;transform:none}
    
    /* ====== Buttons & inputs ====== */
    .btn{padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;cursor:pointer}
    .btn.primary{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#021124}
    input,select{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:10px;border-radius:8px;color:inherit;width:100%}
    label{display:block;color:var(--muted);font-size:13px;margin-bottom:6px}
    
    /* ====== Calendar styles ====== */
    .calendar-wrap{display:flex;flex-direction:column;gap:10px}
    .cal-header{display:flex;justify-content:space-between;align-items:center;gap:8px}
    .cal-grid{display:grid;gap:8px}
    .weekdays{display:grid;grid-template-columns:repeat(7,1fr);gap:8px}
    .weekday{font-size:12px;color:var(--muted);text-align:center}
    .days{display:grid;gap:8px}
    .day{background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);padding:8px;border-radius:10px;min-height:72px;border:1px solid rgba(255,255,255,0.02);position:relative;overflow:hidden}
    .date-num{font-weight:700}
    .events{position:absolute;left:8px;right:8px;bottom:8px;display:flex;flex-direction:column;gap:6px;max-height:56px;overflow:auto}
    .pill{padding:6px 8px;border-radius:8px;font-size:12px;color:#021124;background:linear-gradient(90deg,var(--accent3),var(--accent2));cursor:pointer}
    
    /* ====== Events list & name chips ====== */
    .events-list{display:flex;flex-direction:column;gap:10px}
    .event-card{display:flex;justify-content:space-between;align-items:center;padding:10px;border-radius:10px;background:linear-gradient(90deg, rgba(124,58,237,0.06), rgba(6,182,212,0.03))}
    .name-grid{display:flex;flex-wrap:wrap;gap:8px}
    .chip{padding:8px 10px;border-radius:999px;background:rgba(255,255,255,0.02);cursor:pointer}
    
    /* ====== Modal ====== */
    .modal-backdrop{position:fixed;inset:0;background:rgba(2,6,23,0.6);display:flex;align-items:center;justify-content:center;z-index:80}
    .modal{background:linear-gradient(180deg,#071022,#06121a);padding:16px;border-radius:12px;width:92%;max-width:520px}
    
    /* ====== Footer ====== */
    .footer{margin-top:12px;color:var(--muted);font-size:13px;text-align:center}
    
    /* ====== Responsive breakpoints ====== */
    @media(max-width:520px){
      .wrap{padding:8px}
      .app{padding:10px}
      .days{grid-template-columns:repeat(2,1fr)}
      .day{min-height:64px}
      header{flex-wrap:wrap}
      .hamburger{min-width:36px;padding:6px}
    }
    @media (min-width:521px) and (max-width:760px){
      .days{grid-template-columns:repeat(4,1fr)}
    }
    @media (min-width:761px){
      .wrap{padding:24px}
      .app{grid-template-columns:260px 1fr;gap:var(--gap)}
      .layout{grid-template-columns:260px 1fr}
      .sidebar{min-height:520px}
      .days{grid-template-columns:repeat(7,1fr)}
    }
    /* Scrollbar */
    ::-webkit-scrollbar{height:8px;width:8px}
    ::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.04);border-radius:999px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true">PC</div>
        <div>
          <div class="title">Peter Calendar</div>
          <div style="font-size:13px;color:var(--muted)">Professional</div>
        </div>
      </div>
      <div style="display:flex;gap:8px;align-items:center">
        <button class="hamburger btn" id="hamburger" aria-expanded="false" aria-controls="sidebar">‚ò∞</button>
      </div>
    </header>

    <div class="app" role="application" aria-label="ProColor Calendar">
      <!-- Sidebar -->
      <aside class="sidebar" id="sidebar" aria-label="Main sidebar">
        <nav class="nav" role="navigation" aria-label="Main navigation">
          <button class="nav-btn active" data-route="#home">üè† Home</button>
          <button class="nav-btn" data-route="#calendar">üìÖ Calendar</button>
          <button class="nav-btn" data-route="#events">üóÇÔ∏è Events</button>
          <button class="nav-btn" data-route="#names">üßæ Names</button>
          <button class="nav-btn" data-route="#about">‚ÑπÔ∏è About</button>
        </nav>

        <div class="time-card" aria-live="polite">
          <div id="live-time" style="font-weight:700">--:--:--</div>
          <div id="live-date" style="color:var(--muted);font-size:13px">Loading date</div>
        </div>
      </aside>

      <!-- Main -->
      <main class="main" id="main">
        <!-- HOME -->
        <section id="home" class="page active" aria-labelledby="home-title">
          <div style="display:flex;justify-content:space-between;align-items:center;gap:8px;flex-wrap:wrap">
            <div>
              <h2 id="home-title" style="margin:0">Welcome</h2>
              <div style="color:var(--muted);font-size:13px">Quick snapshot and mini calendar</div>
            </div>
            <div style="display:flex;gap:8px">
              <button class="btn" id="todayBtn">Today</button>
              <button class="btn primary" id="addQuick">Add Event</button>
            </div>
          </div>

          <div style="display:grid;grid-template-columns:1fr 300px;gap:12px;margin-top:12px">
            <div style="padding:12px;border-radius:12px;background:rgba(255,255,255,0.01)">
              <h3 style="margin-top:0">Mini Calendar</h3>
              <div id="miniWeekdays" class="weekdays" style="margin-bottom:8px"></div>
              <div id="miniDays" class="days"></div>
              <p style="color:var(--muted);margin-top:10px;font-size:13px">Tap a day to add an event.</p>
            </div>

            <aside style="display:flex;flex-direction:column;gap:12px">
              <div style="padding:12px;border-radius:12px;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#021124">
                <div style="font-weight:700">Today Snapshot</div>
                <div id="snapshot" style="margin-top:8px;font-weight:600"></div>
              </div>

              <div style="padding:12px;border-radius:12px;background:rgba(255,255,255,0.02)">
                <div style="font-weight:700">Tips</div>
                <ul style="color:var(--muted);margin:8px 0 0 18px;font-size:13px">
                  <li>Events are stored locally</li>
                  <li>Tap names to copy</li>
                </ul>
              </div>
            </aside>
          </div>
        </section>

        <!-- CALENDAR -->
        <section id="calendar" class="page" aria-labelledby="calendar-title">
          <div class="cal-header" style="align-items:center">
            <div>
              <h2 id="calendar-title" style="margin:0">Calendar</h2>
              <div id="monthLabel" style="color:var(--muted);font-size:13px">Month</div>
            </div>
            <div style="display:flex;gap:8px;align-items:center">
              <button class="btn" id="prevMonth">‚óÄ</button>
              <button class="btn" id="nextMonth">‚ñ∂</button>
              <button class="btn primary" id="newEvent">New Event</button>
            </div>
          </div>

          <div style="margin-top:12px">
            <div id="calWeekdays" class="weekdays"></div>
            <div id="calDays" class="days" style="margin-top:8px"></div>
          </div>
        </section>

        <!-- EVENTS -->
        <section id="events" class="page" aria-labelledby="events-title">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <h2 id="events-title" style="margin:0">Events</h2>
            <div style="color:var(--muted);font-size:13px">Manage saved events</div>
          </div>
          <div id="eventsList" style="margin-top:12px"></div>
        </section>

        <!-- NAMES -->
        <section id="names" class="page" aria-labelledby="names-title">
          <h2 id="names-title" style="margin-top:0">Peter Name Generator</h2>
          <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:12px">
            <div style="flex:1;min-width:200px;padding:12px;border-radius:12px;background:rgba(255,255,255,0.01)">
              <label>Prefix</label>
              <select id="prefix"><option value="">(none)</option><option>Dr</option><option>Mr</option><option>Ms</option><option>Prof</option></select>
              <label style="margin-top:8px">Suffix</label>
              <select id="suffix"><option value="">(none)</option><option>Jr</option><option>Sr</option><option>III</option><option>PhD</option></select>
              <button class="btn primary" id="genNames" style="margin-top:10px">Generate</button>
            </div>

            <div style="flex:2;min-width:200px;padding:12px;border-radius:12px;background:rgba(255,255,255,0.01)">
              <label>Results</label>
              <div id="nameResults" class="name-grid" style="margin-top:8px"></div>
              <div style="color:var(--muted);margin-top:8px;font-size:13px">Tap a name to copy</div>
            </div>
          </div>
        </section>

        <!-- ABOUT -->
        <section id="about" class="page" aria-labelledby="about-title">
          <h2 id="about-title" style="margin-top:0">About</h2>
          <p style="color:var(--muted)">Single-file, mobile-first calendar demo. Events persist locally. Ready to extend with server sync.</p>
        </section>

        <div class="footer">Built for clarity and mobile usability</div>
      </main>
    </div>
  </div>

  <!-- Modal template -->
  <template id="modalTpl">
    <div class="modal-backdrop" role="dialog" aria-modal="true">
      <div class="modal">
        <h3 id="modalTitle">Add Event</h3>
        <div style="margin-top:8px;display:flex;flex-direction:column;gap:8px">
          <label>Title</label>
          <input id="evtTitle" placeholder="Event title" />
          <div style="display:flex;gap:8px">
            <div style="flex:1">
              <label>Date</label>
              <input id="evtDate" type="date" />
            </div>
            <div style="width:120px">
              <label>Time</label>
              <input id="evtTime" type="time" />
            </div>
          </div>
          <label>Color</label>
          <input id="evtColor" type="color" value="#f97316" />
          <div style="display:flex;justify-content:flex-end;gap:8px;margin-top:6px">
            <button class="btn" id="evtCancel">Cancel</button>
            <button class="btn primary" id="evtSave">Save</button>
          </div>
        </div>
      </div>
    </div>
  </template>

<script>
/* ====== State & helpers ====== */
const state = {
  viewDate: new Date(),
  events: JSON.parse(localStorage.getItem('pc_events') || '[]'),
  route: '#home'
};
const uid = ()=> 'id_' + Math.random().toString(36).slice(2,9);
const save = ()=> localStorage.setItem('pc_events', JSON.stringify(state.events));

/* ====== Live time ====== */
function updateLive(){
  const now = new Date();
  document.getElementById('live-time').textContent = now.toLocaleTimeString();
  document.getElementById('live-date').textContent = now.toLocaleDateString(undefined,{weekday:'long', year:'numeric', month:'short', day:'numeric'});
  const snap = document.getElementById('snapshot'); if(snap) snap.textContent = now.toLocaleString();
}
setInterval(updateLive,1000); updateLive();

/* ====== Routing ====== */
const pages = document.querySelectorAll('.page');
const navBtns = document.querySelectorAll('.nav-btn');
function go(hash){
  state.route = hash || '#home';
  pages.forEach(p=> p.classList.remove('active'));
  const el = document.querySelector(state.route);
  if(el) el.classList.add('active');
  navBtns.forEach(b=> b.classList.toggle('active', b.dataset.route === state.route));
  // render triggers
  if(state.route === '#calendar') renderCalendar();
  if(state.route === '#events') renderEvents();
  if(state.route === '#home') renderMini();
  // close sidebar on small screens
  if(window.innerWidth < 900) collapseSidebar(true);
}
navBtns.forEach(b=>{
  b.addEventListener('click', ()=> go(b.dataset.route));
  b.dataset.route = b.getAttribute('data-route');
});
go(state.route);

/* ====== Sidebar collapse (mobile) ====== */
const sidebar = document.getElementById('sidebar');
const hamburger = document.getElementById('hamburger');
function collapseSidebar(forceClose=false){
  if(window.innerWidth >= 900) return;
  if(forceClose){ sidebar.style.transform = 'translateX(-110%)'; sidebar.style.opacity = '0'; hamburger.setAttribute('aria-expanded','false'); return; }
  const hidden = sidebar.style.transform === 'translateX(-110%)';
  if(hidden){ sidebar.style.transform = ''; sidebar.style.opacity = ''; hamburger.setAttribute('aria-expanded','true'); }
  else { sidebar.style.transform = 'translateX(-110%)'; sidebar.style.opacity = '0'; hamburger.setAttribute('aria-expanded','false'); }
}
hamburger.addEventListener('click', ()=> collapseSidebar());
window.addEventListener('resize', ()=> {
  if(window.innerWidth >= 900){ sidebar.style.transform = ''; sidebar.style.opacity = ''; hamburger.setAttribute('aria-expanded','true'); }
});

/* ====== Modal factory ====== */
function openModal({title='Add Event', data={}, onSave}){
  const tpl = document.getElementById('modalTpl').content.cloneNode(true);
  document.body.appendChild(tpl);
  const backdrop = document.querySelector('.modal-backdrop:last-of-type');
  backdrop.querySelector('#modalTitle').textContent = title;
  const t = backdrop.querySelector('#evtTitle');
  const d = backdrop.querySelector('#evtDate');
  const ti = backdrop.querySelector('#evtTime');
  const c = backdrop.querySelector('#evtColor');
  const cancel = backdrop.querySelector('#evtCancel');
  const saveBtn = backdrop.querySelector('#evtSave');
  t.value = data.title || '';
  d.value = data.date || new Date().toISOString().slice(0,10);
  ti.value = data.time || new Date().toTimeString().slice(0,5);
  c.value = data.color || '#f97316';
  function close(){ backdrop.remove(); }
  cancel.addEventListener('click', close);
  backdrop.addEventListener('click', (e)=> { if(e.target === backdrop) close(); });
  saveBtn.addEventListener('click', ()=>{
    const payload = { title: t.value || 'Untitled', date: d.value, time: ti.value, color: c.value };
    if(typeof onSave === 'function') onSave(payload);
    close();
  });
  return { close };
}

/* ====== Mini calendar (home) ====== */
function renderMini(){
  const wk = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
  const wkEl = document.getElementById('miniWeekdays'); wkEl.innerHTML = '';
  wk.forEach(w=> { const el = document.createElement('div'); el.className='weekday'; el.textContent = w; wkEl.appendChild(el); });

  const container = document.getElementById('miniDays'); container.innerHTML = '';
  const now = new Date();
  const y = now.getFullYear(), m = now.getMonth();
  const first = new Date(y,m,1).getDay();
  const days = new Date(y,m+1,0).getDate();
  for(let i=0;i<first;i++) container.appendChild(document.createElement('div'));
  for(let d=1; d<=days; d++){
    const cell = document.createElement('div'); cell.className='day';
    cell.innerHTML = '<div class="date-num">'+d+'</div>';
    cell.addEventListener('click', ()=> openModal({ title:'Add Event', data:{ date: new Date(y,m,d).toISOString().slice(0,10) }, onSave:(p)=>{ state.events.push({...p,id:uid()}); save(); renderMini(); renderCalendar(); renderEvents(); } }));
    container.appendChild(cell);
  }
}

/* ====== Calendar page ====== */
function renderCalendar(){
  const wk = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
  const wkEl = document.getElementById('calWeekdays'); wkEl.innerHTML = '';
  wk.forEach(w=> { const el = document.createElement('div'); el.className='weekday'; el.textContent = w; wkEl.appendChild(el); });

  const grid = document.getElementById('calDays'); grid.innerHTML = '';
  const view = new Date(state.viewDate);
  const y = view.getFullYear(), m = view.getMonth();
  document.getElementById('monthLabel').textContent = view.toLocaleString(undefined,{month:'long', year:'numeric'});
  const first = new Date(y,m,1).getDay();
  const days = new Date(y,m+1,0).getDate();
  for(let i=0;i<first;i++) grid.appendChild(document.createElement('div'));
  for(let d=1; d<=days; d++){
    const dayEl = document.createElement('div'); dayEl.className='day';
    const num = document.createElement('div'); num.className='date-num'; num.textContent = d;
    dayEl.appendChild(num);
    const eventsWrap = document.createElement('div'); eventsWrap.className='events';
    const iso = new Date(y,m,d).toISOString().slice(0,10);
    const dayEvents = state.events.filter(e=> e.date === iso);
    dayEvents.slice(0,3).forEach(ev=>{
      const pill = document.createElement('div'); pill.className='pill'; pill.style.background = ev.color || 'linear-gradient(90deg,var(--accent3),var(--accent2))'; pill.textContent = ev.title;
      pill.addEventListener('click', (evnt)=> { evnt.stopPropagation(); openEdit(ev.id); });
      eventsWrap.appendChild(pill);
    });
    dayEl.appendChild(eventsWrap);
    dayEl.addEventListener('click', ()=> openModal({ title:'Add Event', data:{ date: iso }, onSave:(p)=>{ state.events.push({...p,id:uid()}); save(); renderCalendar(); renderMini(); renderEvents(); } }));
    grid.appendChild(dayEl);
  }
}

/* Month nav */
document.getElementById('prevMonth').addEventListener('click', ()=> { state.viewDate.setMonth(state.viewDate.getMonth()-1); renderCalendar(); });
document.getElementById('nextMonth').addEventListener('click', ()=> { state.viewDate.setMonth(state.viewDate.getMonth()+1); renderCalendar(); });
document.getElementById('todayBtn').addEventListener('click', ()=> { state.viewDate = new Date(); go('#calendar'); renderCalendar(); });

/* ====== Events page ====== */
function renderEvents(){
  const container = document.getElementById('eventsList'); container.innerHTML = '';
  if(state.events.length === 0){ container.innerHTML = '<p style="color:var(--muted)">No events yet. Add one from the calendar.</p>'; return; }
  const list = document.createElement('div'); list.className='events-list';
  state.events.slice().sort((a,b)=> a.date.localeCompare(b.date) || (a.time||'').localeCompare(b.time||'')).forEach(ev=>{
    const card = document.createElement('div'); card.className='event-card';
    const left = document.createElement('div'); left.innerHTML = '<div style="font-weight:700">'+ev.title+'</div><div style="color:var(--muted);font-size:13px">'+ev.date + (ev.time ? ' ‚Ä¢ ' + ev.time : '') +'</div>';
    const right = document.createElement('div');
    const edit = document.createElement('button'); edit.className='btn'; edit.textContent='Edit'; edit.addEventListener('click', ()=> openEdit(ev.id));
    const del = document.createElement('button'); del.className='btn'; del.style.marginLeft='8px'; del.textContent='Delete'; del.addEventListener('click', ()=> { state.events = state.events.filter(x=> x.id !== ev.id); save(); renderEvents(); renderCalendar(); renderMini(); });
    right.appendChild(edit); right.appendChild(del);
    card.appendChild(left); card.appendChild(right); list.appendChild(card);
  });
  container.appendChild(list);
}

/* ====== Edit helper ====== */
function openEdit(id){
  const ev = state.events.find(x=> x.id === id); if(!ev) return;
  openModal({ title:'Edit Event', data:ev, onSave:(p)=>{ ev.title = p.title; ev.date = p.date; ev.time = p.time; ev.color = p.color; save(); renderEvents(); renderCalendar(); renderMini(); } });
  // add delete button inside modal after open
  setTimeout(()=>{
    const backdrop = document.querySelector('.modal-backdrop:last-of-type');
    if(!backdrop) return;
    const del = document.createElement('button'); del.className='btn'; del.textContent='Delete'; del.style.marginRight='auto';
    del.addEventListener('click', ()=> { state.events = state.events.filter(x=> x.id !== id); save(); backdrop.remove(); renderEvents(); renderCalendar(); renderMini(); });
    const modal = backdrop.querySelector('.modal');
    modal.querySelector('div').appendChild(del);
  },50);
}

/* ====== Name generator ====== */
const base = ['Peter','Pieter','Petar','Petr','Petros','Petter','P√©ter','Pietro','Petey'];
function generate(prefix, suffix){
  const out = new Set();
  base.forEach(n=>{
    out.add(prefix ? prefix + ' ' + n : n);
    if(suffix) out.add(n + ' ' + suffix);
    if(prefix || suffix) out.add((prefix ? prefix + ' ' : '') + n + (suffix ? ' ' + suffix : ''));
    if(prefix) out.add(prefix[0] + '. ' + n);
    if(suffix) out.add(n + ', ' + suffix);
  });
  return Array.from(out).slice(0,24);
}
document.getElementById('genNames').addEventListener('click', ()=>{
  const p = document.getElementById('prefix').value;
  const s = document.getElementById('suffix').value;
  const res = generate(p,s);
  const container = document.getElementById('nameResults'); container.innerHTML = '';
  res.forEach(r=>{
    const chip = document.createElement('div'); chip.className='chip'; chip.textContent = r;
    chip.addEventListener('click', async ()=> { try{ await navigator.clipboard.writeText(r); chip.style.transform='scale(0.98)'; setTimeout(()=> chip.style.transform='',120); }catch(e){} });
    container.appendChild(chip);
  });
});

/* ====== Quick hooks & keyboard ====== */
document.getElementById('addQuick').addEventListener('click', ()=> openModal({ onSave:(p)=>{ state.events.push({...p,id:uid()}); save(); renderMini(); renderCalendar(); renderEvents(); } }));
document.getElementById('newEvent').addEventListener('click', ()=> openModal({ onSave:(p)=>{ state.events.push({...p,id:uid()}); save(); renderMini(); renderCalendar(); renderEvents(); } }));
document.addEventListener('keydown', (e)=> {
  if(e.key === 'n') openModal({ onSave:(p)=>{ state.events.push({...p,id:uid()}); save(); renderMini(); renderCalendar(); renderEvents(); } });
  if(e.key === 'g') go('#names');
  if(e.key === 'e') go('#events');
});

/* ====== Initial render ====== */
renderMini(); renderCalendar(); renderEvents();

/* ====== Ensure sidebar state on load ====== */
if(window.innerWidth < 900){ sidebar.style.transform = 'translateX(-110%)'; sidebar.style.opacity = '0'; hamburger.setAttribute('aria-expanded','false'); } else { hamburger.setAttribute('aria-expanded','true'); }

/* ====== Small accessibility: set data-route attributes for nav buttons ====== */
document.querySelectorAll('.nav-btn').forEach(b=> b.dataset.route = b.getAttribute('data-route') || b.textContent.trim().toLowerCase());
</script>
</body>
</html>

